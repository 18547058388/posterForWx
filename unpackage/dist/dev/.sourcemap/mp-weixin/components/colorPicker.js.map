{"version":3,"sources":[null,"webpack:///D:/HBUNIAPP/Suokelian_Pill_1.0/components/colorPicker.vue?dcb1","webpack:///D:/HBUNIAPP/Suokelian_Pill_1.0/components/colorPicker.vue?1166","webpack:///D:/HBUNIAPP/Suokelian_Pill_1.0/components/colorPicker.vue?372b","uni-app:///components/colorPicker.vue","webpack:///D:/HBUNIAPP/Suokelian_Pill_1.0/components/colorPicker.vue?f306","webpack:///D:/HBUNIAPP/Suokelian_Pill_1.0/components/colorPicker.vue?b4af"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoI;AACpI;AAC+D;AACL;AACsC;;;AAGhG;AAC0K;AAC1K,gBAAgB,uLAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,kGAAM;AACR,EAAE,2GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA2oB,CAAgB,uqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkB/pB;AACA;AACA,kBADA,EADA;;AAIA;AACA;AACA,kBADA;AAEA,iBAFA,EADA;;AAKA;AACA,mBADA;AAEA,oBAFA,EALA,EAJA;;;AAcA,MAdA,kBAcA;AACA;AACA,iBADA;AAEA,mBAFA;AAGA,mBAHA;AAIA,kBAJA,EAIA;AACA,oBALA,EAKA;AACA,qBANA,CAMA;AANA;AAQA,GAvBA;AAwBA;AACA;AACA;AACA;AACA;AACA,KALA,EAxBA;;AA+BA,SA/BA,qBA+BA;AACA;AACA;AACA;AACA,GAnCA;AAoCA;AACA,QADA,kBACA;AACA;AACA;AACA;AACA;AACA;AACA,iDADA,CACA;AACA,OAFA;AAGA,KATA;AAUA,oBAVA,8BAUA;AACA;AACA;AACA;AACA,cADA;AAEA,mDAFA;AAGA,mCAHA;;AAKA;AACA,SARA,EAQA,IARA;AASA,KApBA;AAqBA,sBArBA,gCAqBA;AACA;AACA;AACA;AACA,cADA;AAEA,qDAFA;AAGA,sDAHA;AAIA,gCAJA;AAKA,uFALA;;AAOA;AACA,SAVA,EAUA,IAVA;AAWA,KAjCA;AAkCA,kBAlCA,4BAkCA;AACA;AACA;AACA;AACA;AACA;AACA,KAxCA;AAyCA,kBAzCA,4BAyCA;AACA;AACA;AACA,OADA,IACA,eADA,GACA,eADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApDA;AAqDA,aArDA,qBAqDA,CArDA,EAqDA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,6CApBA,CAoBA;AACA,KA1EA;AA2EA,WA3EA,mBA2EA,CA3EA,EA2EA;AACA;AACA;AACA;AACA,+CAHA,CAGA;AACA;AACA,KAjFA;AAkFA,SAlFA,iBAkFA,GAlFA,EAkFA;AACA;AACA,KApFA;AAqFA,WArFA,qBAqFA;AACA;AACA,6BADA;;AAGA,KAzFA;AA0FA,UA1FA,oBA0FA;AACA;AACA,KA5FA,EApCA,E;;;;AAoIA;AACA;AACA;AACA,kBADA,CACA;AACA,GAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBADA;AAEA;AACA;AACA,cADA,CACA;AACA,GAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cATA;;AAWA;AACA;;AAEA;AACA;AACA,GAFA;AAGA;AACA,C;;;;;;;;;;;;;ACxMA;AAAA;AAAA;AAAA;AAAosC,CAAgB,irCAAG,EAAC,C;;;;;;;;;;;ACAxtC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/colorPicker.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./colorPicker.vue?vue&type=template&id=06a86766&scoped=true&\"\nvar renderjs\nimport script from \"./colorPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./colorPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./colorPicker.vue?vue&type=style&index=0&id=06a86766&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06a86766\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/colorPicker.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./colorPicker.vue?vue&type=template&id=06a86766&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./colorPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./colorPicker.vue?vue&type=script&lang=js&\"","<template>\r\n    <view class=\"content\">\r\n        <topbar class=\"head\" @cancel=\"cancel\" @save=\"confirm\"></topbar>\r\n        <view class=\"color-picker\">\r\n            <view class=\"color-name\">{{ colorName }}</view>\r\n            <view class=\"show-view\" :style=\"{ background: colorName }\"></view>\r\n            <view class=\"hue-view\" @touchstart=\"pickHue\" @touchmove=\"pickHue\">\r\n                <text class=\"anchor\" :style=\"{ left: hueView.anchorLeft + 'px' }\"></text>\r\n            </view>\r\n            <view class=\"color-view\" @touchstart=\"pickColor\" @touchmove=\"pickColor\" :style=\"{ backgroundColor: 'hsl(' + hueView.H + ', 100%, 50%)' }\">\r\n                <text class=\"anchor\" :style=\"{ top: colorView.anchorTop + 'px', left: colorView.anchorLeft + 'px' }\"></text>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    import topbar from '@/components/robin-editor/header.vue'\r\n    export default {\r\n        components: {\r\n            topbar\r\n        },\r\n        props: {\r\n            color: {\r\n                type: String,\r\n                default: \"\"\r\n            },\r\n            show: {\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                hueView: {},\r\n                colorView: {},\r\n                colorName: '',\r\n                hueLeft: 0.5, // 色相选择器初始位置 [0, 1]\r\n                anchorTop: 0.5, // 颜色选择器初始 top [0, 1]\r\n                anchorLeft: 0.5, // 颜色选择器初始 left [0, 1]\r\n            };\r\n        },\r\n        watch: {\r\n            show: function(newval, oldvar) {\r\n                if (!oldvar && newval) {\r\n                    this.init()\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            if (this.show) {\r\n                this.init()\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                const reg = /^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})*$/\r\n                if (this.color !== '' && reg.test(this.color)) {\r\n                    this.getColorOffset()\r\n                }\r\n                Promise.all([this.getHueViewOffset(), this.getColorViewOffset()]).then(() => {\r\n                    this.colorName = this.getColorString() // 根据 HLS 计算 RGB 字符串\r\n                })\r\n            },\r\n            getHueViewOffset() { // 获取色相选择区域尺寸\r\n                return new Promise(resolve => uni.createSelectorQuery().in(this).select('.hue-view').boundingClientRect(\r\n                    data => {\r\n                        this.hueView = {\r\n                            ...data,\r\n                            anchorLeft: data.width * this.hueLeft,\r\n                            H: this.hueLeft * 360,\r\n                        }\r\n                        resolve()\r\n                    }).exec())\r\n            },\r\n            getColorViewOffset() { // 获取颜色选择区域尺寸\r\n                return new Promise(resolve => uni.createSelectorQuery().in(this).select('.color-view').boundingClientRect(\r\n                    data => {\r\n                        this.colorView = {\r\n                            ...data,\r\n                            anchorTop: data.height * this.anchorTop,\r\n                            anchorLeft: data.width * this.anchorLeft,\r\n                            S: this.anchorLeft,\r\n                            L: (1 - this.anchorLeft * 0.5) - this.anchorTop / (this.anchorLeft + 1)\r\n                        }\r\n                        resolve()\r\n                    }).exec())\r\n            },\r\n            getColorString() { // 获取 RGB 颜色字符串\r\n                const arr = hslToRgb(this.hueView.anchorLeft / this.hueView.width, this.colorView.S, this.colorView.L)\r\n                const r = arr[0].toString(16).length === 1 ? `0${arr[0].toString(16)}` : arr[0].toString(16)\r\n                const g = arr[1].toString(16).length === 1 ? `0${arr[1].toString(16)}` : arr[1].toString(16)\r\n                const b = arr[2].toString(16).length === 1 ? `0${arr[2].toString(16)}` : arr[2].toString(16)\r\n                return `#${r.toUpperCase()}${g.toUpperCase()}${b.toUpperCase()}`\r\n            },\r\n            getColorOffset() {\r\n                var color = this.color.substr(1)\r\n                color = color.length == 6 ? color : color.charAt(0) + color.charAt(0) + color.charAt(1) + color.charAt(\r\n                    1) + color.charAt(2) + color.charAt(2)\r\n                const r = parseInt(\"0x\" + color.substr(0, 2))\r\n                const g = parseInt(\"0x\" + color.substr(2, 2))\r\n                const b = parseInt(\"0x\" + color.substr(4, 2))\r\n                const arr = rgbToHsl(r, g, b)\r\n                this.hueLeft = arr[0]\r\n                this.anchorLeft = arr[1]\r\n                this.anchorTop = ((1 - arr[1] * 0.5) - arr[2]) * (arr[1] + 1)\r\n            },\r\n            pickColor(e) { // 选择颜色\r\n                const top = e.touches[0].clientY - this.colorView.top\r\n                const left = e.touches[0].clientX - this.colorView.left\r\n                if (top < 0) {\r\n                    this.colorView.anchorTop = 0\r\n                } else if (top > this.colorView.height) {\r\n                    this.colorView.anchorTop = this.colorView.height\r\n                } else {\r\n                    this.colorView.anchorTop = top\r\n                }\r\n                if (left < 0) {\r\n                    this.colorView.anchorLeft = 0\r\n                } else if (left > this.colorView.width) {\r\n                    this.colorView.anchorLeft = this.colorView.width\r\n                } else {\r\n                    this.colorView.anchorLeft = e.touches[0].clientX - this.colorView.left\r\n                }\r\n                this.colorView.S = this.colorView.anchorLeft / this.colorView.width\r\n                this.colorView.L = this.floor((1 - this.colorView.S * 0.5) - this.colorView.anchorTop / this.colorView.height /\r\n                    (this.colorView.S + 1))\r\n                this.colorName = this.getColorString() // 根据 HLS 计算 RGB 字符串\r\n            },\r\n            pickHue(e) { // 选择色相\r\n                if (e.touches[0].clientX >= this.hueView.left && e.touches[0].clientX <= this.hueView.right) {\r\n                    this.hueView.anchorLeft = e.touches[0].clientX - this.hueView.left\r\n                    this.hueView.H = this.hueView.anchorLeft / this.hueView.width * 360\r\n                    this.colorName = this.getColorString() // 根据 HLS 计算 RGB 字符串\r\n                }\r\n            },\r\n            floor(num) {\r\n                return num < 0.09 ? 0 : num\r\n            },\r\n            confirm() {\r\n                this.$emit('confirm', {\r\n                    color: this.colorName\r\n                })\r\n            },\r\n            cancel(){\r\n                this.$emit('cancel')\r\n            }\r\n        }\r\n    }\r\n\r\n    function hslToRgb(h, s, l) { // HSL 转 RGB 方法\r\n        var r, g, b;\r\n        if (s == 0) {\r\n            r = g = b = l; // achromatic\r\n        } else {\r\n            var hue2rgb = function hue2rgb(p, q, t) {\r\n                if (t < 0) t += 1;\r\n                if (t > 1) t -= 1;\r\n                if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n                if (t < 1 / 2) return q;\r\n                if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n                return p;\r\n            }\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1 / 3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1 / 3);\r\n        }\r\n        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\r\n    }\r\n\r\n    function rgbToHsl(r, g, b) {\r\n        r /= 255, g /= 255, b /= 255;\r\n        var max = Math.max(r, g, b),\r\n            min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n        if (max == min) {\r\n            h = s = 0; // achromatic\r\n        } else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        var round = function(n, l) {\r\n            return Math.round(n * Math.pow(10, l)) / Math.pow(10, l)\r\n        }\r\n        return [round(h, 3), round(s, 3), round(l, 3)];\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .content {\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        background-color: #fff;\r\n\r\n        .head {\r\n            width: 100%;\r\n        }\r\n\r\n        .color-picker {\r\n            display: flex;\r\n            align-items: center;\r\n            flex-direction: column;\r\n            justify-content: center;\r\n\r\n            .color-name {\r\n                margin: 23rpx;\r\n                font-size: 45rpx;\r\n                font-weight: bold;\r\n                letter-spacing: 8rpx;\r\n            }\r\n\r\n            .show-view {\r\n                height: 56rpx;\r\n                width: 567rpx;\r\n            }\r\n\r\n            .hue-view {\r\n                width: 567rpx;\r\n                height: 56rpx;\r\n                margin: 12rpx 0;\r\n                position: relative;\r\n                background: linear-gradient(to right, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00);\r\n\r\n                .anchor {\r\n                    width: 12rpx;\r\n                    height: 100%;\r\n                    position: absolute;\r\n                    background: #FFFFFF;\r\n                    transform: translate(-50%);\r\n                    box-shadow: 0 0 2rpx rgba(0, 0, 0, 0.6);\r\n                }\r\n            }\r\n\r\n            .color-view {\r\n                width: 567rpx;\r\n                height: 345rpx;\r\n                position: relative;\r\n                margin-bottom: 12upx;\r\n\r\n                &::before,\r\n                &::after {\r\n                    content: '';\r\n                    top: 0;\r\n                    left: 0;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    position: absolute;\r\n                }\r\n\r\n                &::before {\r\n                    background: linear-gradient(to right, white, transparent);\r\n                }\r\n\r\n                &::after {\r\n                    background: linear-gradient(to top, black, transparent);\r\n                }\r\n\r\n                .anchor {\r\n                    z-index: 1;\r\n                    width: 24rpx;\r\n                    height: 24rpx;\r\n                    border-radius: 50%;\r\n                    position: absolute;\r\n                    border: 4rpx solid #FFFFFF;\r\n                    background: rgba(0, 0, 0, .3);\r\n                    transform: translate(-50%, -50%);\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./colorPicker.vue?vue&type=style&index=0&id=06a86766&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./colorPicker.vue?vue&type=style&index=0&id=06a86766&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1606206348876\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}